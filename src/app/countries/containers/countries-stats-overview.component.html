<covid19-page-loader-overlay
  *ngIf="loading$ | async"
></covid19-page-loader-overlay>
<mat-tab-group
  #matTabGroup
  class="tab-custom-overflow"
  (animationDone)="animationDone(matTabGroup.selectedIndex)"
>
  <mat-tab [label]="tabLabelsFunc[0].label">
    <div class="page-content">
      <covid19-countries-autocomplete
        #countryAutoComplete
        [countryStats]="countryStats$ | async"
      ></covid19-countries-autocomplete>
      <div style="margin-top: 5px;"></div>
      <div class="card-container">
        <ng-container
          *ngFor="
            let countryStats of filteredCountryStats$ | async;
            trackBy: trackCountryStatsChanges
          "
        >
          <covid19-country-stats-card
            [countryStats]="countryStats"
            [countriesOfInterest]="countriesOfInterest"
            (addCountryOfInterest)="storeCountryOfInterest($event)"
            (removeCountryOfInterest)="removeCountryOfInterest($event)"
          ></covid19-country-stats-card>
        </ng-container>
      </div>
    </div>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[1].label">
    <covid19-countries-stats-stacked-barchart
      *ngIf="selectedIndex === 1"
      [countryStats]="countryStats$ | async"
    ></covid19-countries-stats-stacked-barchart>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[2].label">
    <covid19-country-stats-daily-values-bar-chart
      *ngIf="selectedIndex === 2"
      [key]="'activeCases'"
      [yAxisLabel]="'Active Cases'"
      [color]="colors[0]"
      [countryStatsHistory]="countryStatsHistory$ | async"
    ></covid19-country-stats-daily-values-bar-chart>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[3].label">
    <covid19-country-stats-daily-values-bar-chart
      *ngIf="selectedIndex === 3"
      [key]="'totalDeaths'"
      [yAxisLabel]="'Deaths'"
      [color]="colors[1]"
      [countryStatsHistory]="countryStatsHistory$ | async"
    ></covid19-country-stats-daily-values-bar-chart>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[4].label">
    <covid19-country-stats-daily-values-bar-chart
      *ngIf="selectedIndex === 4"
      [key]="'recoveredCases'"
      [yAxisLabel]="'Recovered Cases'"
      [color]="colors[2]"
      [countryStatsHistory]="countryStatsHistory$ | async"
    ></covid19-country-stats-daily-values-bar-chart>
  </mat-tab>
</mat-tab-group>
