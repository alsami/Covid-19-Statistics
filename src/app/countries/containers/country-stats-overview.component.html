<covid19-page-loading-indicator
  [loading]="loading$ | async"
></covid19-page-loading-indicator>
<mat-tab-group
  #matTabGroup
  class="tab-custom-overflow"
  (animationDone)="animationDone(matTabGroup.selectedIndex)"
>
  <mat-tab [label]="tabLabelsFunc[0].label">
    <div class="page-content">
      <div class="toggle-container">
        <mat-button-toggle-group
          [multiple]="false"
          (change)="viewSelectionChanged($event)"
        >
          <mat-button-toggle
            *ngFor="let viewOption of viewOptions"
            [checked]="viewOption.selected"
            [value]="viewOption.value"
            [matTooltip]="viewOption.tooltip"
          >
            <mat-icon>{{ viewOption.label }}</mat-icon>
          </mat-button-toggle>
        </mat-button-toggle-group>
      </div>
      <covid19-country-detailed-stats-cards
        *ngIf="viewOptions[0].selected"
        [countryStats]="countryStats$ | async"
      ></covid19-country-detailed-stats-cards>
      <ng-container *ngIf="viewOptions[1].selected">
        <div class="chart-container">
          <mat-card>
            <mat-card-content>
              <covid19-country-stats-bar-chart
                [countryStats]="countryStats$ | async"
              ></covid19-country-stats-bar-chart>
            </mat-card-content>
          </mat-card>
          <mat-card>
            <mat-card-content>
              <covid19-country-stats-pie-chart
                [countryStats]="countryStats$ | async"
              ></covid19-country-stats-pie-chart>
            </mat-card-content>
          </mat-card>
        </div>
      </ng-container>
    </div>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[1].label">
    <div class="page-content">
      <covid19-country-stats-day-to-day-cards
        [countryStats]="countryStatsDayHistory$ | async"
      ></covid19-country-stats-day-to-day-cards>
    </div>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[2].label">
    <div class="page-content">
      <covid19-country-stats-history-table
        [countryStats]="countryHistoryStats$ | async"
      ></covid19-country-stats-history-table>
    </div>
  </mat-tab>
  <mat-tab [label]="tabLabelsFunc[3].label">
    <covid19-country-stats-line-chart
      [countryStats]="countryStatsDayHistory$ | async"
    ></covid19-country-stats-line-chart>
  </mat-tab>
</mat-tab-group>
